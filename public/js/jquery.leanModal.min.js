(function(a){a.fn.extend({leanModal:function(c){var d={top:100,overlay:0.5,closeButton:null};var b=a("<div id='lean_overlay'></div>");a("body").append(b);c=a.extend(d,c);return this.each(function(){var e=c;a(this).click(function(h){var i=a("#lean_overlay");var f=(a(this).data("modal")===undefined)?"#modal":a(this).data("modal");var g=a(this).data("section");i.click(function(){close_modal(f)});a(e.closeButton).click(function(){close_modal(f)});i.css({display:"block",opacity:0}).fadeTo(200,e.overlay);a(f).css({display:"block",position:"fixed",opacity:0,"z-index":11000});a(f).fadeTo(200,1);h.preventDefault()})})}})})(jQuery);function getModalContent(a,b){jQuery.ajax({url:a,type:"POST",async:false,success:function(e){var c=jQuery.parseJSON(e);var d=(c.content!==undefined)?c.content:c;b.hide().html(d).show();adapt_modal()}})}function close_modal(a){if(a===undefined){a=".modalContainer"}$("#lean_overlay").fadeOut(200);$(a).css({display:"none"})}function show_section(a,c){c=(c===undefined)?"#modal":c;$(".modal_section").hide();var b=$(c+" .modal_section#"+a).data("title");$(".popupHeader").text(b);$(c+" .modal_section").each(function(){var d=$(this).attr("id");if(d===a){$(this).show()}else{$(this).hide()}});adapt_modal()}function adapt_modal(d){var a=(d===undefined)?$(".modalContainer"):d;var c=$(window).width();var b=$(window).height();$(".modal_section").each(function(){if($(this).is(":visible")){$(this).css({"max-height":0.9*b+"px"});var e=$(this).outerHeight();var f=$(this).outerWidth();var h=0.5*(c-f);var g=0.5*(b-e);a.css({top:g+"px",left:h+"px"})}})}$(document).ready(function(){$(window).resize(function(){adapt_modal()});$("body").on("click","#lean_overlay",function(a){$(this).hide()}).on("mouseover",".leanModal",function(a){a.preventDefault();$(this).leanModal({top:50,overlay:0.6,closeButton:".close_modal"})}).on("click",".close_modal",function(a){a.preventDefault();close_modal()}).on("click",".leanModal",function(c){c.preventDefault();var a=$(this).attr("href");if(a.length>0&&a!==undefined){var b=$(this).data("section");getModalContent(a,$(".modal_section#"+b))}})});